#!/usr/bin/env ruby

STDOUT.sync = true
STDERR.sync = true

require File.expand_path('../../config/environment',  __FILE__)
require 'adhearsion/cli_commands'

Thread.abort_on_exception = false # Set to true for debugging

Dir['./lib/*.rb'].each { |f| require f }

# TODO This will suppress warnings at exit, but could also
#       mask potential problems. Try to remove after a while:
#
Celluloid.logger = nil

AmqpManager.start
Adhearsion::CLI::AhnCommand.start
